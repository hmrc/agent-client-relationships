{
    "microservice": "agent-client-relationships",
    "controller": "InvitationController",
    "apis": [
        {
            "endpoint": "PUT /client/authorisation-response/reject/:invitationId",
            "description": "Allows a client to reject a pending authorisation request (invitation).",
            "interactions": [
                {
                    "step": 1,
                    "type": "Database",
                    "service": null,
                    "method": null,
                    "path": null,
                    "database": "agent-client-relationships-db (invitations)",
                    "operation": "Update",
                    "description": "Find the invitation by ID and update its status to 'Rejected'."
                }
            ]
        },
        {
            "endpoint": "POST /agent/:arn/authorisation-request",
            "description": "Allows an agent to create a new authorisation request (invitation) for a client.",
            "interactions": [
                {
                    "step": 1,
                    "type": "API Call",
                    "service": "des",
                    "method": "GET",
                    "path": "/registration/individual/nino/:nino",
                    "database": null,
                    "operation": null,
                    "description": "Get client details from DES to validate the client."
                },
                {
                    "step": 2,
                    "type": "Database",
                    "service": null,
                    "method": null,
                    "path": null,
                    "database": "agent-client-relationships-db (invitations)",
                    "operation": "Create",
                    "description": "Create a new invitation record with a 'Pending' status."
                }
            ]
        },
        {
            "endpoint": "PUT /agent/cancel-invitation/:invitationId",
            "description": "Allows an agent to cancel a pending authorisation request (invitation) they have previously sent.",
            "interactions": [
                {
                    "step": 1,
                    "type": "Database",
                    "service": null,
                    "method": null,
                    "path": null,
                    "database": "agent-client-relationships-db (invitations)",
                    "operation": "Update",
                    "description": "Find the invitation by ID and agent's ARN, and update its status to 'Cancelled'."
                }
            ]
        },
        {
            "endpoint": "POST /invitations/trusts-enrolment-orchestrator/:urn/update",
            "description": "Updates a trust-related invitation by replacing the temporary URN with the permanent UTR after registration.",
            "interactions": [
                {
                    "step": 1,
                    "type": "Database",
                    "service": null,
                    "method": null,
                    "path": null,
                    "database": "agent-client-relationships-db (invitations)",
                    "operation": "Update",
                    "description": "Find the invitation by the URN and update it with the new UTR."
                }
            ]
        }
    ]
}