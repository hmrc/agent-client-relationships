{
    "microservice": "agent-client-relationships",
    "controller": "CustomerStatusController",
    "apis": [
        {
            "endpoint": "GET /customer-status",
            "description": "Provides a summary of the client's relationship status, including pending invitations, historical invitations, and active relationships.",
            "interactions": [
                {
                    "step": 1,
                    "type": "Database",
                    "service": null,
                    "method": null,
                    "path": null,
                    "database": "agent-client-relationships-db (invitations)",
                    "operation": "Read",
                    "description": "Find all non-suspended invitations for the client."
                },
                {
                    "step": 2,
                    "type": "Database",
                    "service": null,
                    "method": null,
                    "path": null,
                    "database": "agent-client-relationships-db (partial-auth)",
                    "operation": "Read",
                    "description": "Find any partial-auth records for the client's NINO."
                },
                {
                    "step": 3,
                    "type": "API Call",
                    "service": "agent-fi-relationship",
                    "method": "GET",
                    "path": "/agent-fi-relationship/irv-active-relationship/client/:nino",
                    "database": null,
                    "operation": null,
                    "description": "Check for an active IRV relationship for the client."
                },
                {
                    "step": 4,
                    "type": "Database",
                    "service": null,
                    "method": null,
                    "path": null,
                    "database": "agent-client-relationships-db (relationships)",
                    "operation": "Read",
                    "description": "If no partial-auth or IRV relationship, check for any other active relationships."
                }
            ]
        }
    ]
}